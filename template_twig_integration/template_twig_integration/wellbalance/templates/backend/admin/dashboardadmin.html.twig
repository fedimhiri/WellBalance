{% extends 'backend/baseend.html.twig' %}

{% block title %}Dashboard{% endblock %}

{% block body %}
<!-- Breadcrumb -->
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h4 class="fw-bold mb-0">Dashboard</h4>
        <nav class="d-flex">
            <h6 class="fw-normal text-muted mb-0">Home / Dashboard</h6>
        </nav>
    </div>
    <div class="d-flex align-items-center gap-3">
        <div class="dropdown">
            <button class="btn btn-outline-primary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                <i class="bx bx-calendar me-2"></i>Derniers 7 jours
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Derniers 30 jours</a></li>
                <li><a class="dropdown-item" href="#">Ce mois</a></li>
                <li><a class="dropdown-item" href="#">Cette ann√©e</a></li>
            </ul>
        </div>
        <button class="btn btn-primary">
            <i class="bx bx-download me-2"></i>Exporter
        </button>
    </div>
</div>

<!-- Statistics Cards -->
<div class="row g-4 mb-4">
    <div class="col-xl-3 col-md-6">
        <div class="card card-hover border-0 shadow-sm">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <span class="text-muted small">Revenu Total</span>
                        <h3 class="fw-bold mt-2">$12,628</h3>
                        <div class="d-flex align-items-center">
                            <span class="badge bg-success-subtle text-success">
                                <i class="bx bx-up-arrow-alt me-1"></i>+72.80%
                            </span>
                            <span class="text-muted small ms-2">vs mois dernier</span>
                        </div>
                    </div>
                    <div class="avatar flex-shrink-0">
                        <span class="avatar-initial rounded bg-label-primary">
                            <i class="bx bx-dollar-circle fs-4"></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-xl-3 col-md-6">
        <div class="card card-hover border-0 shadow-sm">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <span class="text-muted small">Nouveaux Utilisateurs</span>
                        <h3 class="fw-bold mt-2">3,456</h3>
                        <div class="d-flex align-items-center">
                            <span class="badge bg-success-subtle text-success">
                                <i class="bx bx-up-arrow-alt me-1"></i>+28.42%
                            </span>
                            <span class="text-muted small ms-2">vs mois dernier</span>
                        </div>
                    </div>
                    <div class="avatar flex-shrink-0">
                        <span class="avatar-initial rounded bg-label-success">
                            <i class="bx bx-user-plus fs-4"></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-xl-3 col-md-6">
        <div class="card card-hover border-0 shadow-sm">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <span class="text-muted small">Commandes</span>
                        <h3 class="fw-bold mt-2">1,258</h3>
                        <div class="d-flex align-items-center">
                            <span class="badge bg-danger-subtle text-danger">
                                <i class="bx bx-down-arrow-alt me-1"></i>-4.25%
                            </span>
                            <span class="text-muted small ms-2">vs mois dernier</span>
                        </div>
                    </div>
                    <div class="avatar flex-shrink-0">
                        <span class="avatar-initial rounded bg-label-warning">
                            <i class="bx bx-cart fs-4"></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-xl-3 col-md-6">
        <div class="card card-hover border-0 shadow-sm">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <span class="text-muted small">Satisfaction</span>
                        <h3 class="fw-bold mt-2">94.2%</h3>
                        <div class="d-flex align-items-center">
                            <span class="badge bg-success-subtle text-success">
                                <i class="bx bx-up-arrow-alt me-1"></i>+12.6%
                            </span>
                            <span class="text-muted small ms-2">vs mois dernier</span>
                        </div>
                    </div>
                    <div class="avatar flex-shrink-0">
                        <span class="avatar-initial rounded bg-label-info">
                            <i class="bx bx-heart fs-4"></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main Content -->
<div class="row g-4">
    <!-- Welcome Card -->
    <div class="col-lg-8">
        <div class="card border-0 shadow-sm">
            <div class="d-flex align-items-end row g-0">
                <div class="col-md-7">
                    <div class="card-body">
                        <h5 class="card-title text-primary mb-3">
                            F√©licitations John! üéâ
                        </h5>
                        <p class="card-text text-muted mb-4">
                            Vous avez r√©alis√© <strong class="text-dark">72%</strong> plus de ventes aujourd'hui.
                            V√©rifiez votre nouveau badge dans votre profil.
                        </p>
                        <div class="d-flex gap-3">
                            <a href="{{ path('admin_profile') }}" class="btn btn-primary">
                                <i class="bx bx-award me-2"></i>Voir les badges
                            </a>
                            <a href="#" class="btn btn-outline-secondary">
                                <i class="bx bx-chart me-2"></i>Voir les statistiques
                            </a>
                        </div>
                        <div class="mt-4">
                            <p class="text-muted small mb-2">Objectif du mois</p>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-primary" role="progressbar" style="width: 85%"></div>
                            </div>
                            <div class="d-flex justify-content-between mt-2">
                                <span class="text-muted small">85% compl√©t√©</span>
                                <span class="text-muted small">$12.6k / $15k</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-5 text-center text-md-end">
                    <img src="{{ asset('assets_backend/img/illustrations/man-with-laptop.png') }}"
                         alt="Welcome" class="img-fluid" style="max-height: 200px;">
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="col-lg-4">
        <div class="card border-0 shadow-sm h-100">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Activit√© R√©cente</h5>
                <a href="#" class="btn btn-sm btn-link">Voir tout</a>
            </div>
            <div class="card-body">
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-indicator bg-primary">
                            <i class="bx bx-user-plus"></i>
                        </div>
                        <div class="timeline-content">
                            <h6 class="mb-1">Nouvel utilisateur inscrit</h6>
                            <p class="text-muted small mb-0">Sarah Johnson vient de s'inscrire</p>
                            <span class="timeline-time">Il y a 5 min</span>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-indicator bg-success">
                            <i class="bx bx-cart"></i>
                        </div>
                        <div class="timeline-content">
                            <h6 class="mb-1">Nouvelle commande</h6>
                            <p class="text-muted small mb-0">Commande #ORD-7890 cr√©√©e</p>
                            <span class="timeline-time">Il y a 15 min</span>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-indicator bg-warning">
                            <i class="bx bx-credit-card"></i>
                        </div>
                        <div class="timeline-content">
                            <h6 class="mb-1">Paiement re√ßu</h6>
                            <p class="text-muted small mb-0">Paiement de $450 confirm√©</p>
                            <span class="timeline-time">Il y a 1 heure</span>
                        </div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-indicator bg-info">
                            <i class="bx bx-message"></i>
                        </div>
                        <div class="timeline-content">
                            <h6 class="mb-1">Nouveau message</h6>
                            <p class="text-muted small mb-0">Message de support re√ßu</p>
                            <span class="timeline-time">Il y a 2 heures</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Charts and Tables Section -->
<div class="row g-4 mt-4">
    <!-- Revenue Chart -->
    <div class="col-lg-8">
        <div class="card border-0 shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Revenu sur 6 mois</h5>
                <div class="dropdown">
                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        2026
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">2025</a></li>
                        <li><a class="dropdown-item" href="#">2024</a></li>
                    </ul>
                </div>
            </div>
            <div class="card-body">
                <div id="revenueChart" style="min-height: 300px;">
                    <!-- Chart would be implemented with Chart.js -->
                    <div class="text-center py-5">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="text-muted mt-3">Chargement du graphique...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Top Products -->
    <div class="col-lg-4">
        <div class="card border-0 shadow-sm">
            <div class="card-header">
                <h5 class="mb-0">Produits Populaires</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-borderless">
                        <thead>
                            <tr>
                                <th>Produit</th>
                                <th>Ventes</th>
                                <th>Revenu</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="avatar avatar-xs me-3">
                                            <span class="avatar-initial rounded bg-label-primary">P</span>
                                        </div>
                                        <div>
                                            <h6 class="mb-0">iPhone 15 Pro</h6>
                                            <small class="text-muted">√âlectronique</small>
                                        </div>
                                    </div>
                                </td>
                                <td>245</td>
                                <td class="text-success">$24,500</td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="avatar avatar-xs me-3">
                                            <span class="avatar-initial rounded bg-label-success">N</span>
                                        </div>
                                        <div>
                                            <h6 class="mb-0">Nike Air Max</h6>
                                            <small class="text-muted">Mode</small>
                                        </div>
                                    </div>
                                </td>
                                <td>189</td>
                                <td class="text-success">$9,450</td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <div class="avatar avatar-xs me-3">
                                            <span class="avatar-initial rounded bg-label-warning">M</span>
                                        </div>
                                        <div>
                                            <h6 class="mb-0">MacBook Pro</h6>
                                            <small class="text-muted">Informatique</small>
                                        </div>
                                    </div>
                                </td>
                                <td>156</td>
                                <td class="text-success">$46,800</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Recent Transactions -->
<div class="row g-4 mt-4">
    <div class="col-12">
        <div class="card border-0 shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Transactions R√©centes</h5>
                <a href="#" class="btn btn-sm btn-primary">Voir toutes</a>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>ID Transaction</th>
                                <th>Client</th>
                                <th>Date</th>
                                <th>Montant</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>#TX-7890</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <img src="{{ asset('assets_backend/img/avatars/2.png') }}" 
                                             class="rounded-circle me-3" width="32" height="32">
                                        <div>
                                            <h6 class="mb-0">Emma Wilson</h6>
                                            <small class="text-muted">emma@example.com</small>
                                        </div>
                                    </div>
                                </td>
                                <td>12 F√©v 2026</td>
                                <td>$1,250.00</td>
                                <td>
                                    <span class="badge bg-success-subtle text-success">
                                        <i class="bx bx-check-circle me-1"></i>Compl√©t√©
                                    </span>
                                </td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="bx bx-show"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>#TX-7889</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <img src="{{ asset('assets_backend/img/avatars/3.png') }}" 
                                             class="rounded-circle me-3" width="32" height="32">
                                        <div>
                                            <h6 class="mb-0">Michael Brown</h6>
                                            <small class="text-muted">michael@example.com</small>
                                        </div>
                                    </div>
                                </td>
                                <td>11 F√©v 2026</td>
                                <td>$890.50</td>
                                <td>
                                    <span class="badge bg-warning-subtle text-warning">
                                        <i class="bx bx-time me-1"></i>En attente
                                    </span>
                                </td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="bx bx-show"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>#TX-7888</td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <img src="{{ asset('assets_backend/img/avatars/4.png') }}" 
                                             class="rounded-circle me-3" width="32" height="32">
                                        <div>
                                            <h6 class="mb-0">Sophia Davis</h6>
                                            <small class="text-muted">sophia@example.com</small>
                                        </div>
                                    </div>
                                </td>
                                <td>10 F√©v 2026</td>
                                <td>$2,450.00</td>
                                <td>
                                    <span class="badge bg-success-subtle text-success">
                                        <i class="bx bx-check-circle me-1"></i>Compl√©t√©
                                    </span>
                                </td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="bx bx-show"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block javascripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize tooltips
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
    
    // Add hover effects to cards
    document.querySelectorAll('.card-hover').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-4px)';
            this.style.transition = 'transform 0.2s ease';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
});
</script>
{% endblock %}